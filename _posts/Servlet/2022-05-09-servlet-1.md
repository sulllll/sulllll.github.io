---
layout: single
title:  " DAY-47 Servlet ì‹œì‘"
categories: Servlet
tag: [Servlet, response, request]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---



# ğŸ²2022-05-03

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ



## 1ï¸âƒ£ ì„œë²„ì— í”„ë¡œì íŠ¸ ì¶”ê°€í•´ì£¼ê¸°(ì—°ë™)

![1.png](/assets/images/posts/2022-05-09/1.png)

![2.png](/assets/images/posts/2022-05-09/2.png)

## 2ï¸âƒ£ ì£¼ì†Œ ë³€ê²½

![3.png](/assets/images/posts/2022-05-09/3.png)

![4.png](/assets/images/posts/2022-05-09/4.png)

![5.png](/assets/images/posts/2022-05-09/5.png)



- ìš”ì²­ ì£¼ì†Œ ë³€ê²½ â†’ introProject â†’ / ë¡œ ë³€ê²½
- ì£¼ì†Œ ë³€ê²½ Server.xml ì—ì„œ 155ë²ˆì§¸ <Context docBase="introProject" path="/" reloadable="true" source="org.eclipse.jst.jee.server:introProject"/></Host> â†’ pathë¥¼ ë³€ê²½ í•´ì£¼ë©´ ëœë‹¤.

## 3ï¸âƒ£ clientê°€ ì„œë²„ì— ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ë°©ì‹

### 1) get : urlì— ì¿¼ë¦¬ë¥¼ ë¶™ì—¬ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹



â†’ url?key=valueì˜ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡ â†’ ì „ì†¡í•˜ê³ ì í•˜ëŠ” ë°ì´í„°ê°€ url ëª¨ë‘ ë…¸ì¶œ



â†’ ë°ì´í„°ì˜ ê¸¸ì´ ì œí•œ

```java

<a href="/InputServlet?msg=hello"></a>
<form action="/InputServlet" method="get">
	<!-- form íƒœê·¸ ì•ˆì—ì„œ ì „ì†¡í•´ì£¼ê³  ì‹¶ì€ input íƒœê·¸ì˜ ê²½ìš° ë¬´ì¡°ê±´ name ì†ì„± í•„ìš” -->
	<input type="text" name="msg">
	<!-- formíƒœê·¸ ì•ˆì—ì„œ buttonì˜ typeì„ buttonìœ¼ë¡œ ë‘ë©´ ì¼ë°˜ ë²„íŠ¼ìœ¼ë¡œ ì¸ì‹ -->
	<!-- button typeì„ submitìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜ button typeì„ ëª…ì‹œí•´ì•¼ í•œë‹¤ -->
	<button type="type">ì „ì†¡</button>
</form>
```

- aíƒœê·¸ì™€ form íƒœê·¸ë¥¼ ì´ìš©

### 2) post : body ì˜ì—­ì— ë°ì´í„°ê°€ ë‹´ê²¨ ì „ì†¡ë˜ëŠ” ë°©ì‹



â†’ ë°ì´í„°ê°€ ì™¸ë¶€ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ ìµœì†Œí•œ ë³´ì•ˆ

```java
<form action="/InputServlet" method="post">
	<input type="text" name="msg">
	<button type="submit">ì „ì†¡</button>
</form>
```

> form íƒœê·¸ì•ˆì˜ buttonì˜ íƒ€ì…ì€ submitìœ¼ë¡œ inputì¼ ê²½ìš° name í•„ìš”
>

### 3) Servlet íŒŒì¼ ê¸°ë³¸ ì…‹íŒ…

ServletíŒŒì¼

```java
request.setCharacterEncoding("utf-8");
response.setCharacterEncoding("utf-8");
response.setContentType("text/html;charset=utf-8");
```

## 4ï¸âƒ£ sendRedirect

1ï¸âƒ£ index.html

```html
<body>
	<button type="button" id="toInput">toInput</button>
	<button type="button" id="toOutput">toOutput</button>

	<script>
	document.getElementById("toInput").onclick = function() {
		// input.html ì´ë™
		// servletì„ ê±°ì³ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì¤Œ
		// why? í˜ì´ì§€ ê°„ì˜ ì´ë™ì— ìˆì–´ ì ‘ê·¼ê¶Œí•œ/ê°’ì˜ ìœ íš¨ì„± ë“± ë³µì¡í•œ ë¡œì§ì— ëŒ€í•´
		// servletì—ì„œ ì²˜ë¦¬ í›„ ì´ë™ì´ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì£¼ë ¤ê³ 

		// aíƒœê·¸ í´ë¦­í–ˆì„ë•Œì™€ ê°™ì€ íš¨ê³¼ -> location.href
		location.href = "/toInput.proc" // í´ë¦­ì‹œ toInput.proc(ì„œë¸”ë¦¿ íŒŒì¼)ìœ¼ë¡œ ì´ë™
	}
	</script>
</body>
```

2ï¸âƒ£ ToInput.java(ì„œë¸”ë¦¿ íŒŒì¼)

```java
@WebServlet("/toInput.proc")
public class ToInput extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	System.out.println("ToInput ì„œë¸”ë¦¿ ë„ì°©");

	// í˜ì´ì§€ë¥¼ ë‹¤ì‹œ /input.htmlë¡œ ëŒë ¤ì¤€ë‹¤
	response.sendRedirect("/input.html");
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
	doGet(request, response);
}
}
```

3ï¸âƒ£ input.html

```html
<form action="/input.proc" method="post">
	<div>
		<p>nickname : <p>
		<input type="text" name="nickname">
	</div>
	<div>
		<p>message : </p>
		<textarea name="message"></textarea>
	</div>
	<div>
		<button type="submit">ë³´ë‚´ê¸°</button>
	</div>
</form>
```

4ï¸âƒ£ input.java(ì„œë¸”ë¦¿ íŒŒì¼)

```java
@WebServlet("/input.proc")
public class input extends HttpServlet {

	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// ê¸°ë³¸ ì„¤ì •
		request.setCharacterEncoding("utf-8");
		response.setCharacterEncoding("utf-8");
		response.setContentType("text/html;charset=utf-8");

		String nickname = request.getParameter("nickname");
		String message = request.getParameter("message");

		System.out.println(nickname);
		System.out.println(message);
	}

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doGet(request, response);
	}
}
```

1. ì²˜ìŒì—ëŠ” [localhost:8099/index.html](http://localhost:8099/index.html)ë¡œ ë“¤ì–´ì˜´
2. toInput ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ToInput.javaíŒŒì¼ì´ ì‹¤í–‰ë˜ê³  sendRedirectë¡œ ì¸í•´ input.htmlë¡œ ì—°ê²°ëœë‹¤
3. input.htmlì—ì„œ â€œë³´ë‚´ê¸°â€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ formíƒœê·¸ì˜ action ì£¼ì†Œì¸ input.procìœ¼ë¡œ ì´ë™í•œë‹¤


## â“ í†°ìº£ ì˜¤ë¥˜

```html
the server cannot be started because one or more of the ports are invalid.
open the server editor and correct the invalid ports.
```

- server.xml íŒŒì¼ì—ì„œ  --><Server port="8005" shutdown="SHUTDOWN"> 20ë²ˆì§¸ì¤„ì—ì„œ Server Portê°€ ì„¤ì •ì„ í•´ì£¼ë©´ ëœë‹¤.-> (ì—¬ê¸°ì„  8005ë¡œ ì„¤ì •)