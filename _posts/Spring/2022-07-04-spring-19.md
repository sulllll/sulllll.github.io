---
layout: single
title:  "DAY-84 ê³µê³µë°ì´í„° í™œìš©"
categories: Spring
tag: [Spring ê³µê³µë°ì´í„° í™œìš©]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---

# ğŸ’»2022-07-04

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ



# 1ï¸âƒ£ ê³µê³µë°ì´í„° í™œìš©

![1.png](/assets/images/posts/2022-07-04/1.png)

- ì‘ë‹µ ë°ì´í„° í˜•ì‹ì€ xml or jsonìœ¼ë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆë‹¤(ë‘˜ì¤‘ì— í•˜ë‚˜ë§Œ ì‚¬ìš© ê°€ëŠ¥)

## ğŸ”” ê°œë…

### â“ ObjectMapperë€

- JSON ì»¨í…ì¸ ë¥¼ Java ê°ì²´ë¡œ deserialization í•˜ê±°ë‚˜ Java ê°ì²´ë¥¼ JSONìœ¼ë¡œ serialization í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í´ë˜ìŠ¤ì´ë‹¤.
- ObjectMapperë¥¼ ì´ìš©í•˜ë©´ JSONì„ Java ê°ì²´ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê³ , ë°˜ëŒ€ë¡œ Java ê°ì²´ë¥¼ JSON ê°ì²´ë¡œ serialization í•  ìˆ˜ ìˆë‹¤.

### ğŸ’¡ **JSON â†’ Java Object**

- JSON íŒŒì¼ì„ Java ê°ì²´ë¡œ deserialization í•˜ê¸° ìœ„í•´ì„œëŠ” ObjectMapperì˜ readValue()
Â ë©”ì„œë“œë¥¼ ì´ìš©í•œë‹¤.

### ğŸ’¡ **Java Object â†’ JSON**

- Java ê°ì²´ë¥¼ JSONìœ¼ë¡œ serialization í•˜ê¸° ìœ„í•´ì„œëŠ” ObjectMapperì˜ writeValue()
Â ë©”ì„œë“œë¥¼ ì´ìš©í•œë‹¤.

[https://velog.io/@zooneon/Java-ObjectMapperë¥¼-ì´ìš©í•˜ì—¬-JSON-íŒŒì‹±í•˜ê¸°](https://velog.io/@zooneon/Java-ObjectMapper%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-JSON-%ED%8C%8C%EC%8B%B1%ED%95%98%EA%B8%B0)

---

## ğŸ’» Code

### 1) JSON

<span style="color: #2D3748; background-color:#fff5b1;">PublicDataController</span>


```java
@RequestMapping(value = "/toJSON")
public String toJSON(Model model) throws Exception{
	String rs = service.getJSON(); // jsonë¡œ ê°’ì´ ë„˜ì–´ì˜¨ë‹¤

	// ObjectMapper í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ì„œ Mapìœ¼ë¡œ ë³€í™˜í•´ì„œ ë°ì´í„°ë¥¼ ë³´ë‚´ê¸°
	ObjectMapper mapper = new ObjectMapper();
	Map<String, Object> map = mapper.readValue(rs, Map.class);

	model.addAttribute("data", map);

	return "/publicdata/publicJson";
}
```

- jsonì„ mapìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” jackson-databind ë¼ì´ë¸ŒëŸ¬ë¦¬ í•„ìš”
- ObjectMapperë¥¼ ì´ìš©
- Stringì— jsonì´ ë‹´ê²¨ìˆì–´ì„œ jsp íŒŒì¼ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€ â†’ mapìœ¼ë¡œ ë³€í™˜ í›„ ì‚¬ìš©
- Json â†’ Mapìœ¼ë¡œ ë³€í™˜ì´ê¸°ì— readValue() ì‚¬ìš©

### 2) XML

```java
@RequestMapping(value = "/toXml")
public String toXml(Model model) throws Exception{
	String rs = service.getXML(); // xmlìœ¼ë¡œ ë°ì´í„°ê°€ ë„˜ì–´ì˜´

	// XMLMapper í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ map í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³€í™˜
	XmlMapper mapper = new XmlMapper();
	Map<String, Object> map = mapper.readValue(rs, Map.class);

	model.addAttribute("data", map);
	return "/publicdata/publicXml";
}
```

- jackson-dataformat-xml ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- XmlMapperë¥¼ ì‚¬ìš©

### 3) Ajax (Json)

<span style="color: #2D3748; background-color:#fff5b1;">PublicDataController</span>


```java
@ResponseBody
@RequestMapping(value = "/getJSON", produces="application/json; charset:UTF-8")
public String getJSON() throws Exception{
	String data = service.getJSON();
	return data;
}

```

- @RequestMapping(produces="application/json; charset:UTF-8") ì„ ì–¸  : jspë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ json ë°ì´í„°ë¼ê³  ëª…ì‹œ / í•œê¸€ì´ ì•ˆê¹¨ì§€ê²Œ charset

<span style="color: #2D3748; background-color:#fff5b1;">publicAjax.jsp</span>


```javascript
$("#getJSON").click(function() {
	$.ajax ({
		url : "/public/getJSON",
		success: function(data) {
			console.log(data);
			console.log("--------------------");
			console.log(data.FestivalBaseInfo[0].id); // id ë§Œ ì¶œë ¥

			// ë°˜ë³µë¬¸ ëŒë¦¬ë©´ì„œ id ë§Œ ì¶œë ¥
			/* for(i = 0; i < data.FestivalBaseInfo.length; i++) {
				console.log(data.FestivalBaseInfo[i].id);
			} */

		for(let item of data.FestivalBaseInfo) {
			let tr = $("<tr>");
				let td1 = $("<td>").append(item.festivalNm);
				let td2 = $("<td>").append(item.festivalVenue);
				let td3 = $("<td>").append(item.festivalBeginDate);
				let td4 = $("<td>").append(item.festivalEndDate);
				let td5 = $("<td>").append(item.homePage);

				tr.append(td1, td2, td3, td4, td5);
				tr.appendTo("tbody");
			}
		},
		error : function(e) {
			console.log(e);
		}
	})
})
```

### 4) Ajax (xml)


<span style="color: #2D3748; background-color:#fff5b1;">publicAjax.jsp</span>

```java
@ResponseBody
@RequestMapping(value = "/getXML", produces="application/xml; charset:UTF-8")
public String getXML() throws Exception{
	String data = service.getXML();
	return data;
}
```

- @RequestMapping(produces="application/xml; charset:UTF-8") ì„ ì–¸  : jspë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ xml ë°ì´í„°ë¼ê³  ëª…ì‹œ / í•œê¸€ì´ ì•ˆê¹¨ì§€ê²Œ charset

<span style="color: #2D3748; background-color:#fff5b1;">publicAjax.jsp</span>


```javascript
$("#getXML").click(function() {
	$.ajax({
		url : "/public/getXML",
		success : function(data) {
			let items = $(data).find("item"); // jqueryì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ itemê°’ë“¤ë§Œ ë½‘ê¸°
			console.log(items);
			for(let item of items) {
				console.log($(item).find("festivalNm").html()); // í•´ë‹¹ ê°’ì˜ í…ìŠ¤íŠ¸ë§Œ ë½‘ê¸° ìœ„í•´ html() ì‚¬ìš©
			}
		},
		error : function(e) {
			console.log(e);
		}
	})
})
```
> @Produces : ì¶œë ¥í•˜ê³ ì í•˜ëŠ” ë°ì´í„° í¬ë§·ì„ ì •ì˜í•œë‹¤.
