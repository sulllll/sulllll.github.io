---
layout: single
title:  "DAY-78 Spring Session ì´ìš©, FormData í”„ë¡œí•„ ë³€ê²½, Interceptor"
categories: Spring
tag: [Spring Session ì´ìš©, FormData í”„ë¡œí•„ ë³€ê²½, Interceptor]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---

# ğŸ’»2022-06-23

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ

# 1ï¸âƒ£ Session (Autowiredë¡œ ì£¼ì… ë°›ê¸°)

<span style="color: #2D3748; background-color:#fff5b1;">MemberController.java</span>


```java
@Autowired
private MemberService service;
@Autowired // sessionì€ bean ìƒì„± ì•ˆí•´ë„ springì—ì„œ ìë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ containerì— ë„£ì–´ì¤Œ
private HttpSession session;

@RequestMapping("/login")
@ResponseBody	// ë¡œê·¸ì¸ ìš”ì²­
public String login(String id, String pw) throws Exception{
	System.out.println(id + " : " + pw);
	MemberDTO dto = service.login(id, pw);
	if(dto != null) {
		session.setAttribute("loginSession", dto);
		return "success";
	}
	return "fail";
}
```

- ë¡œê·¸ì¸ì„ í•˜ë©´ í•´ë‹¹ ì•„ì´ë””ì˜ Sessionì„ ìœ ì§€í•´ì•¼ í•œë‹¤.

```java
session.setAttribute("loginSession", dto);
```

- Sessionì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Autowired ì‚¬ìš©(sessionì€ bean ìƒì„± ì•ˆí•´ë„ springì—ì„œ ìë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ containerì— ë„£ì–´ì¤Œ)

# 2ï¸âƒ£ ë¡œê·¸ì¸ ì„¸ì…˜, í”„ë¡œí•„ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
<span style="color: #2D3748; background-color:#fff5b1;">servlet-context</span>


```java
<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<!--
	/resources/** :  resources í´ë” ì•„ë˜ í•˜ìœ„ ëª¨ë“  ê²½ë¡œ(í´ë”/íŒŒì¼)
	-> /resources/a.jpg      /resources/b.txt       /resources/images/a.jpg
		  /resources/images/profile/b.jpg

	/resources/* :  resources í´ë”ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°”ë¡œ í•˜ìœ„ í´ë”ë§Œ
	-> /resources/a.jpg      /resources/b.txt
		ì•„ë˜ ê²½ë¡œëŠ” ë§¤í•‘ì´ ë˜ì§€ ì•ŠìŒ
	-> /resources/images/a.jpg    /resources/images/profile/b.jpg

	resources íƒœê·¸ : ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ìš”ì²­ì´ ì „ë‹¬ë˜ì§€ ì•Šê³  ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” í´ë”ì— ì ‘ê·¼í•´
	resourceë¥¼ ì •ìƒì ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œë” urlì„ ë§¤í•‘ì‹œì¼œì£¼ëŠ” ì—­í• 
	-->
<resources mapping="/resources/**" location="/resources/" />

<!-- í”„ë¡œí•„ ì‚¬ì§„ ê²½ë¡œ resources ì„¤ì • -->
<resources mapping="/profile/*" location="/profile/" />
```

- ì¦‰ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ê²½ë¡œì—ì„œ profile ì•„ë˜ì˜ ëª¨ë“  íŒŒì¼ë“¤ì„ ì½ëŠ”ë‹¤ëŠ” mappingì„ í•´ì£¼ëŠ” ê²ƒ
- *ì„ í•˜ë‚˜ë§Œ ì‚¬ìš©í•´ë„ ë˜ëŠ” ì´ìœ ëŠ” ì‚¬ì§„ì˜ ê²½ë¡œê°€ profileì•ˆì— í•˜ìœ„í´ë”ì— ë“¤ì–´ê°€ëŠ”ê²Œ ì•„ë‹ˆë¼ ë°”ë¡œ profileì˜ í´ë”ë¡œ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì´ë‹¤.

<span style="color: #2D3748; background-color:#fff5b1;">MemberController.java</span>


```java
@RequestMapping("/login")
@ResponseBody	// ë¡œê·¸ì¸ ìš”ì²­
public String login(String id, String pw) throws Exception{
	System.out.println(id + " : " + pw);
	MemberDTO dto = service.login(id, pw);
	if(dto != null) {
		session.setAttribute("loginSession", dto); // í•´ë‹¹ ì•„ì´ë””ì— ê´€í•œ ì •ë³´ë¥¼ ë‹¤ ë‹¤ ë³´ë‚´ì¤€ë‹¤.
		return "success";
	}
	return "fail";
}
```

â— MemberControllerì—ì„œ welcome.jspë¡œ dtoë¥¼ ì•ˆë³´ëƒˆëŠ”ë° ì–´ë–»ê²Œ welcome.jspì—ì„œ ë°›ì„ ìˆ˜ ìˆëŠ”ê±¸ê¹Œ?  â†’ ë¡œê·¸ì¸ í• ë•Œ ì„¸ì…˜ì„ ìƒì„±í•´ì£¼ê³  ê·¸ ì„¸ì…˜ê°’ì€ í†°ìº£ì´ ê°€ì§€ê³ ìˆë‹¤ ê·¸ë˜ì„œ ê·¸ ê°’ì„ ë‹¤ë¥¸ jspì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥(ë‹¨ ë¡œê·¸ì¸ì´ ì„±ê³µí–ˆì„ ë•Œ ì „ì œë¥¼ ë‘ê³ )

- **ë¡œê·¸ì¸ì´ ì„±ê³µ í•  ë•Œë§Œ sessionì´ í˜•ì„± ë˜ì–´ì•¼ í•˜ë¯€ë¡œ loginë©”ì„œë“œ ì—ì„œ sessionì„ ë§Œë“ ë‹¤**

<span style="color: #2D3748; background-color:#fff5b1;">welcome.jsp</span>


```html
<!--í”„ë¡œí•„ ì˜ì—­-->
<div class="row profileContent">
	<div class="col d-flex flex-column mt-1 justify-content-center align-items-center">
		<div class="profileIcon">
			<!-- ì‚¬ìš©ìê°€ ì‚¬ì§„ì„ ë“±ë¡í•  ë•Œì™€ ì•ˆí–ˆì„ ë•Œì˜ ì¡°ê±´ë¬¸ -->
			<c:choose>
				<c:when test="{empty loginSession.profile_image}">
					<img src="/resources/images/default_profile.png" id="profile_image">
				</c:when>
				<c:otherwise>
					<img src="/profile/${loginSession.profile_image}" id="profile_image">
				</c:otherwise>
			</c:choose>
		</div>

		<!-- í”„ë¡œí•„ ë©”ì„¸ì§€ê°€ ìˆì„ ë•Œì™€ ì—†ì„ ë•Œ êµ¬ë¶„-->
		<c:choose>
			<c:when test="${empty loginSession.profile_message}">
				<input type="text" value="ìƒíƒœë©”ì„¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤." name="profileMsg" class="mt-3 form-control w-50 text-center" id="profile_message" readonly>
			</c:when>
			<c:otherwise>
				<input type="text" value="${loginSession.profile_message}" name="profileMsg" class="mt-3 form-control w-50 text-center" id="profile_message" readonly>
			</c:otherwise>
		</c:choose>
	</div>
</div>
```

# 3ï¸âƒ£ ë¡œê·¸ì•„ì›ƒ

- ë¡œê·¸ì•„ì›ƒì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¸ì…˜ì„ ì¢…ë£Œì‹œì¼œì•¼ í•œë‹¤.

<span style="color: #2D3748; background-color:#fff5b1;">welcome.jsp</span>


```html
<!--ë²„íŠ¼ ì˜ì—­-->
<div class="row mt-3 ">
	<div class="col d-flex justify-content-evenly m-4">
		<button type="button" class="btn btn-secondary btn-lg" id="logout">ë¡œê·¸ì•„ì›ƒ</button>
	</div>
</div>
<script>
document.getElementById("logout").onclick = function() {
	location.href = "/member/logout";
};
</script>
```

- logout ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì´ë™

<span style="color: #2D3748; background-color:#fff5b1;">memberController.java</span>


```java
// ë¡œê·¸ì•„ì›ƒ
// ì„¸ì…˜ì„ ì¢…ë£Œ ì‹œí‚¤ê³  í™ˆìœ¼ë¡œ í˜ì´ì§€ ì´ë™
@RequestMapping(value ="/logout")
public String logout() {
	session.invalidate(); // ì„¸ì…˜ ì¢…ë£Œ
	return "redirect:/"; // Home ìœ¼
}
```

# 4ï¸âƒ£ ìë°”ìŠ¤í¬ë¦½íŠ¸ FormData

- htmlì˜ form ëŒ€ì‹ í•´ì„œ ì‚¬ìš©
- ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ì‚¬ìš©

```jsx
let formData = new FormData(document.getElementById('í¼ ì•„ì´ë””'));
```

## ğŸ’¡ ì‚¬ìš© ì´ìœ 

HTMLìƒì—ì„œ <form> íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì„œ submit ë²„íŠ¼ì„ ë§Œë“¤ì–´ì„œ ì „ì†¡í•œë‹¤.

ajaxë¡œ ë¹„ë™ê¸°ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡ í•´ì•¼ í•  ë•ŒëŠ” ë³´í†µ json ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.

í•˜ì§€ë§Œ íŒŒì¼ì„ ì „ì†¡í•´ì•¼ í•˜ê±°ë‚˜, ì´ë¯¸ì§€ë¥¼ ì „ì†¡í•´ì•¼ í•˜ëŠ”ë°, ë¹„ë™ê¸°ë¡œ ì „ì†¡ í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? ì´ëŸ´ ë•Œ FormData ê°ì²´ë¥¼ í™œìš© í•œë‹¤.

â— ì „ì†¡ ë°©ì‹ì€ ajaxì˜ ë¹„ë™ê¸° ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ì „ì†¡ ë°ì´í„° í¬ë§·ì€ jsonì´ ì•„ë‹Œ formì˜ í¬ë§·

```jsx
$.ajax({
  url: (url),
	contentType: false,
	processData: false, // ê¸°ë³¸ê°’ì€ true Stringìœ¼ë¡œ ë„˜ì–´ê°„ëŠ ê²ƒì„ ë§‰ê¸°ìœ„í•´ false
  type: 'POST',
  data: formData,
  success: function (mesg) {},
   error: function (xhr, status) {}
});
```

[ì¶œì²˜](https://coding-food-court.tistory.com/11)

## â— ì—ëŸ¬

![1.png](/assets/images/posts/2022-06-23/1.png)

- íŒŒì¼ì˜ ê°’ì„ ë³´ë‚´ëŠ”ë° contentType: false, processData: false ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë–„ ë°œìƒ

## ğŸ”” í™œìš©(í”„ë¡œí•„ ë³€ê²½)

<span style="color: #2D3748; background-color:#fff5b1;">welcome.jsp</span>


```jsx

$("#saveProfile").on("click",function(){
	let data = new FormData(document.getElementById("profileForm"));
	$.ajax({
		url: "/member/modifyProfile",
		type: "post", // file ë°ì´í„°ë¥¼ ë³´ë‚¼ë•ŒëŠ” postë¡œ í•´ì•¼í•œë‹¤
    contentType: false,
		processData: false,
		enctype: "multipart/form-data",
		data: data, // ìœ„ì—ì„œ ìƒì„±í•œ form // ì‚¬ì§„(multipart)ì™€ input(profile_message)ê°€ dataì— ë‹´ê²¨ìˆë‹¤.
		success: function(data) {
			console.log(data);
		},
		error : function(e) {
			console.log(e);
		}
	})
})
```

- jqueryì˜ serialize í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ formì„ ì „ì†¡í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë³€í™˜
- íŒŒì¼ì„ ì „ì†¡í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” serializeë¡œ ë°ì´í„°ë¥¼ ë³€í™˜í•´ë„ íŒŒì¼ ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ë³€í™˜
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ FormData ê°ì²´ì— ìš°ë¦¬ê°€ ë§Œë“¤ì–´ì¤€ formì„ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ ë„˜ê²¨ì„œ ë§Œë“  ë³€ìˆ˜ë¥¼ ajaxì˜ data ì˜ì—­ì— ì…‹íŒ…

## ğŸ”” FormData í™œìš© í”„ë¡œí•„ ë³€ê²½

```java
// í”„ë¡œí•„ ìˆ˜ì • ìš”ì²­
// ê°’ì„ ë°›ì„ ë•Œ Multipartì™€ profile_messageê°€ ë„˜ì–´ì˜¨ë‹¤
@ResponseBody
@RequestMapping(value="/modifyProfile")
public String modifyProfile(String profile_message, MultipartFile file) throws Exception{
	System.out.println("profile_message : " + profile_message);
	System.out.println("MultipartFile : " + file);

	// ë§Œì•½ì— fileì´ ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´ ì¦‰ ë„˜ì–´ì˜¨ íŒŒì¼ì´ ìˆë‹¤ë©´
	if(!file.isEmpty()) {
		String realPath = session.getServletContext().getRealPath("profile");

		// íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ëŠ” serviceì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  ë°˜í™˜ê°’ìœ¼ë¡œ ì‹¤ì œ ì €ì¥ëœ íŒŒì¼ëª…ì„ ë°˜í™˜
		String profile_image = service.uploadProfile(file,realPath); // sys_nameì´ return ëœë‹¤.

		// í˜„ì¬ì˜ loginSession ì•ˆì— ë“¤ì–´ìˆëŠ” dtoì˜ profile_image ë©¤ë²„í•„ë“œ ê°’ì„ ìƒˆë¡­ê²Œ ì—…ë¡œë“œëœ íŒŒì¼ëª…ìœ¼ë¡œ ë³€ê²½
		((MemberDTO)session.getAttribute("loginSession")).setProfile_image(profile_image);
	}
	// ë§Œì•½ ì‚¬ìš©ìê°€ ì‚¬ì§„ ë³€ê²½ì„ ì•ˆí–ˆë‹¤ë©´ ì¦‰ file ì´ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë©´ -> ë°ì´í„°ì˜ defaultê°’ ìœ ì§€(ê¸°ë³¸ ì•„ì´ì½˜)
	// loginSessionì— dto -> profile_image -> ì‚¬ìš©ìê°€ ì›ë˜ ê°€ì§€ê³  ìˆëŠ” í”„ë¡œí•„ì‚¬ì§„ì˜ ì´ë¦„ê°’

	// ë„˜ì–´ì˜¨ ë³€ê²½ëœ í”„ë¡œí•„ ë©”ì„œë“œë„ loginSessionì˜ dtoì— ë‹¤ì‹œ ì…‹íŒ…(profile_message)
	((MemberDTO)session.getAttribute("loginSession")).setProfile_message(profile_message);

	// MemberDTO ê°’ì„ ë„˜ê²¨ì¤€ë‹¤. sessionì„ ë„˜ê²¨ì£¼ëŠ”ê²Œ ì•„ë‹ˆë‹¤
	int rs = service.modifyProfile((MemberDTO)session.getAttribute("loginSession"));
	if(rs > 0) {
		return "success";
	}else {
		return "fail";
	}
}
```

- í”„ë¡œí•„ ë³€ê²½ ì‹œ ì‚¬ì§„ ì—…ë°ì´íŠ¸ë¥¼ ì•ˆ í•˜ë©´ ê¸°ì¡´ í˜„ì¬ idì˜ ì„¸ì…˜ ê°’ì´ ê·¸ëŒ€ë¡œ ë“¤ì–´ê°€ê³ , ì‚¬ì§„ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë©´ ifë¬¸ìœ¼ë¡œ ë“¤ì–´ê°€ ì„¸ì…˜ì˜ ì´ë¯¸ì§€ ê²½ë¡œì™€ íŒŒì¼ëª…ì„ í•©ì¹œ sys_name ê°’ì´ profile_imageì˜ ê°’ìœ¼ë¡œ ë“¤ì–´ê°„ë‹¤
- í”„ë¡œí•„ ë©”ì„¸ì§€ëŠ” ë°˜ë“œì‹œ ì‘ì„±í•´ì•¼ í•œë‹¤ê³  ê°€ì • í•œ ì½”ë“œë‹¤(ì¦‰ ì‚¬ì§„ ë³€ê²½ê³¼ ë³„ê°œë¡œ ë°˜ë“œì‹œ ê°’ì´ ë“¤ì–´ì™€ì•¼í•¨) ë©”ì„¸ì§€ë¥¼ í˜„ì¬ idì˜ ì„¸ì…˜ê°’ì„ ë°”ê¿”ì¤€ë‹¤.
- ê·¸ í›„ service.modifyProfile()ì— ëª¨ë“  ê²Œ ë°”ë€ í˜„ì¬ì˜ session ê°’ì„ ë„£ì–´ì¤€ë‹¤.

â— ì¦‰ ìœ„ì˜ ì½”ë“œë“¤ì€ í˜„ì¬ ë¡œê·¸ì¸í•œ idì˜ ì„¸ì…˜ê°’ì„ ë³€ê²½í•˜ì—¬ì„œ ê·¸ ì„¸ì„ ë“¤ì˜ ë°ì´í„°ë¡œ daoì™€ serviceë¥¼ í†µí•´ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë°©ì‹ì´ë‹¤.

<span style="color: #2D3748; background-color:#fff5b1;">MemberService.java</span>


```java
// ìƒˆë¡œìš´ ì‚¬ì§„ íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°
public String uploadProfile(MultipartFile file, String realPath) throws Exception {
	File realPathFile =  new File(realPath);

	// í•´ë‹¹ ê²½ë¡œì— profile í´ë”ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í´ë” ë§Œë“¤ê¸°
	if(!realPathFile.exists()) {
		realPathFile.mkdir();
	}
	// fileìœ ë¬´ ê²€ì‚¬ëŠ” controllerì—ì„œ í•´ì¤¬ë‹¤. ê·¸ë˜ì„œ if ë¬¸ í•„ìš” x

	// ì‹¤ì œ íŒŒì¼ì˜ ì´ë¦„ì„ ê°€ì ¸ì˜¤ê¸°
	String ori_name = file.getOriginalFilename();
	// sys_name ë§Œë“¤ê¸°
	String sys_name = UUID.randomUUID() + "_" + ori_name;
	// transferTo(ì‹¤ì œ íŒŒì¼ì´ ì €ì¥ë  full ê²½ë¡œ -> íŒŒì¼ ê°ì²´ ì´ìš©);
	// File.separator -> / ë¥¼ ë§Œë“¤ì–´ì£¼ê¸° ìœ„í•´ì„œ (os,ë§¥)ë“±ì—ì„œ ë‹¨ìˆœíˆ /ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—
	// File.separatorì‚¬ìš©
	file.transferTo(new File(realPath + File.separator + sys_name));
	return sys_name;
}

// í”„ë¡œí•„ ì—…ë°ì´íŠ¸
public int modifyProfile(MemberDTO dto) throws Exception{
	return dao.modifyProfile(dto);
}
```

<span style="color: #2D3748; background-color:#fff5b1;">MemberDAO.java</span>


```java
// ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸
public int modifyProfile(MemberDTO dto) throws Exception {
	String sql = "update member set profile_message =?, profile_image =? where id =?";

	try(Connection con = bds.getConnection();
		PreparedStatement pstmt = con.prepareStatement(sql)) {

		pstmt.setString(1, dto.getProfile_message());
		pstmt.setString(2, dto.getProfile_image());
		pstmt.setString(3, dto.getId());
		return pstmt.executeUpdate();
	}
}
```

# 5ï¸âƒ£ Interceptor (ë¡œê·¸ì¸ ì‹œ í•„ìš”)

Interceptor : Springì´ ì œê³µí•˜ëŠ” ê¸°ìˆ ë¡œì¨, ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿(Dispatcher Servlet)ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ê³¼ í›„ì— ìš”ì²­ê³¼ ì‘ë‹µì„ ì°¸ì¡°í•˜ê±°ë‚˜ ê°€ê³µí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ

ìš©ë„ : íŠ¹ì • ê·¸ë£¹ì˜ ì‚¬ìš©ìëŠ” ì–´ë–¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë°, ì´ëŸ¬í•œ ì‘ì—…ë“¤ì€ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ë„˜ì–´ê°€ê¸° ì „ì— ê²€ì‚¬í•´ì•¼ í•˜ë¯€ë¡œ ì¸í„°ì…‰í„°ê°€ ì²˜ë¦¬í•˜ê¸°ì— ì í•©í•˜ë‹¤.

[Interceptor ì°¸ê³ ](https://mangkyu.tistory.com/173)

<span style="color: #2D3748; background-color:#fff5b1;">servlet-context.java</span>

```java
<interceptors>
	<interceptor>
		<mapping path="/**"/>
		<exclude-mapping path="/"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<exclude-mapping path="/resources/**"/> <!-- cssì™€ ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¬ ë•Œ í•„ìš” -->
		<exclude-mapping path="/member/login"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<exclude-mapping path="/member/toSignup"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<exclude-mapping path="/member/checkLogin"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<exclude-mapping path="/member/signup"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<exclude-mapping path="/toError"/> <!-- í•´ë‹¹ urlë§Œ interceptor ì œì™¸ -->
		<beans:bean class="kh.board.utils.AuthLoginInerceptor"/>
	</interceptor>
</interceptors>
```

- ë¡œê·¸ì¸ì´ ëœí›„ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©(ì¦‰ ë¡œê·¸ì¸ ìœ ë¬´ ìš©ë„) â†’ controller ì „ì— ë¨¼ì € ì‹¤í–‰ í•´ì„œ íŒë‹¨
- /**  : ëª¨ë“  ìš”ì²­ê°’ì— ë§¤í•‘
- ì–´ë–¤ ì¸í„°ì…‰í„° í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í• ê±´ì§€ ë¹ˆ ë“±ë¡
- ë§Œì•½ ì¸í„°ì…‰í„°ê°€ ë™ì‘í•  í•„ìš”ê°€ ì—†ëŠ” ìš”ì²­ ê°’ì´ë¼ë©´ ê·¸ urlì€ ì œì™¸ â†’ exclude ì‚¬ìš©
- exclude ëœ í˜ì´ì§€ë“¤ì€ ë¡œê·¸ì¸ì„ ì•ˆí•´ë„ ì‚¬ìš© ê°€ëŠ¥ í•´ì•¼í•œë‹¤

<span style="color: #2D3748; background-color:#fff5b1;">AuthLoginInerceptor.java</span>

```java
package kh.board.utils;
public class AuthLoginInerceptor implements HandlerInterceptor{

@Override
public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object Handler) throws Exception {
	System.out.println("ë¡œê·¸ì¸ ê²€ì‚¬ ì¸í„°ì…‰í„° ë„ì°©");

	// ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ì—¬ë¶€ ê²€ì‚¬(ë¡œê·¸ì¸ ì„¸ì…˜ì˜ ìœ ë¬´ë¥¼ ë”°ì ¸ì„œ íŒë‹¨)
	if(request.getSession().getAttribute("loginSession") == null) {
		// ì‚¬ìš©ì ë¡œê·¸ì¸ì´ ì•ˆë˜ì–´ ìˆìŒ.
		System.out.println("ë¡œê·¸ì¸ ì•ˆë¨");

		// ë¡œê·¸ì¸ì´ ì•ˆë˜ì–´ìˆë‹¤ë©´ /ë¡œ rediret ì‹œì¼œë²„ë¦´ ê²ƒ
		response.sendRedirect("/"); // Homeìœ¼ë¡œ ì´ë™
		return false;
	}
	return true;
}
}
```
- dispatcherServletê³¼ controller ì‚¬ì´ì—ì„œ ìš”ì²­ / ì‘ë‹µì„ ê°€ë¡œì±„ì„œ ì¶”ê°€ì ì¸ ì²˜ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤
- HandlerInterceptorë¥¼ implements í•´ì¤€ë‹¤
- preHandle() : D.Sì´ controllerì—ê²Œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
- postHandle() : controllerê°€ D.Sì—ê²Œ ì‘ë‹µì„ ë³´ë‚´ê¸° ì „ì— ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œ
- loginSessionì´ë¼ëŠ” keyê°’ì´ sessionì— ë“¤ì–´ìˆëŠ”ì§€ ì•„ë‹Œì§€ë¥¼ ê²€ì‚¬
- true ë°˜í™˜ -> Interceptorê°€ ë™ì‘í•œ í›„ì— Controller/D.S ìš”ì²­/ì‘ë‹µì„ ì •ìƒì ìœ¼ë¡œ ì „ë‹¬
- false ë°˜í™˜ : Interceptor ë™ì‘ í›„ Controller/D.S ìš”ì²­/ì‘ë‹µì„ ì „ë‹¬ X