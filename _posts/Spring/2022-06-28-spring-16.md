---
layout: single
title:  "DAY-81 Spring ìŠ¤ì¼€ì¤„ëŸ¬(ìë™ ì‚­ì œ), myBatis ì‹œì‘"
categories: Spring
tag: [Spring ìŠ¤ì¼€ì¤„ëŸ¬(ìë™ ì‚­ì œ), myBatis ì‹œì‘]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---

# ğŸ’»2022-06-28

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ


# 2ï¸âƒ£ myBatis ì‹œì‘

## 1) ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€

1. mybatis
2. mybatis-spring
3. spring-jdbc
4. ojdbc8
5. dbcp2

---

## 2)ì½”ë“œ

<span style="color: #2D3748; background-color:#fff5b1;">root-context.xml</span>


``` java
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- Root Context: defines shared resources visible to all other web components -->
	<!-- DBCP ë¹ˆ ë“±ë¡ -->
	<bean id="bds" class="org.apache.commons.dbcp2.BasicDataSource">
		<property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
		<property name="url" value="jdbc:oracle:thin:@localhost:1521:xe"/>
		<property name="username" value="msg"/>
		<property name="password" value="msg"/>
		<property name="initialSize" value="30"/>
	</bean>

	<!-- SqlSessionFactoryBean ë¹ˆ ë“±ë¡ -->
	<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
		<!-- 1. DBCP ì„¸í„° ì£¼ì… -> ìœ„ì—ì„œ ë§Œë“  DBCP ë¹ˆì„ ì„¸í„°ë¡œ ì£¼ì…-->
		<property name="dataSource" ref="bds"/>

		<!-- 2. mapper ì„¸í„° ì£¼ì… -> ì‹¤ì œ ë“±ë¡í•´ì£¼ê³  ì‹¶ì€ mapper íŒŒì¼ì´ ìœ„ì¹˜í•œ ê²½ë¡œê°’ì„ value  -->
		<!-- classpath ì˜ë¯¸ -> src/main/resource í´ë” ì•ˆì— -->
		<property name="mapperLocations" value="classpath:mappers/message-mapper.xml"/>

		<!-- mappers í´ë” ì•ˆì— ìˆëŠ” ì—¬ëŸ¬ê°œì˜ ë©”í¼íŒŒì¼ì„ ë“±ë¡í•˜ê³  ì‹¶ì€ ê²½ìš°
		<property name="mapperLocations" value="classpath:mappers/*.xml"/> -->
	</bean>

	<!-- SqlSession ë¹ˆ ë“±ë¡ -->
	<bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate">
		<!-- ìœ„ì—ì„œ ìƒì„±í•œ SqlSessionFactoryBeanì— ìƒì„±ìë¡œ ì£¼ì…-->
		<constructor-arg ref="sqlSessionFactory"/>
	</bean>
</beans>
```
<span style="color: #2D3748; background-color:#fff5b1;">MessageDAO</span>


```java
@Repository
public class MessageDAO {
	// myBatisë¥¼ ì´ìš©í•´ mapperê°€ ê°€ì§€ê³  ìˆëŠ” ì¿¼ë¦¬ë¬¸ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë©¤ë²„í•„ë“œ ì¶”ê°€
	@Autowired
	private SqlSession session;

	public void insert(MessageDTO dto) throws Exception{
	}
}
```

- myBatisë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ 3ê°œì˜ beanì„ ì—°ê²°ì‹œì¼œ ì£¼ê³  ìƒì„±í•´ì•¼ í•œë‹¤.
- myBatisë¥¼ í™œìš©í•˜ë ¤ë©´ private BasicDataSource bds; ì½”ë“œë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  SqlSession sessionì„ ì‚¬ìš©í•œë‹¤
- DAOì—ì„œëŠ” ì–´ë–¤ ì¿¼ë¦¬ë¬¸ì„ ì‹¤í–‰ ì‹œí‚¬ê±°ê³  ê·¸ ì¿¼ë¦¬ë¬¸ì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ í•„ìš”í•œ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ê·¸ ë°ì´í„°ë§Œ ë„˜ê²¨ì£¼ê³  ê²°ê³¼ë¥¼ ë°˜í™˜ ë°›ëŠ”ë‹¤.

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>


```java
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- mapper íŒŒì¼ : DBì— ì ‘ê·¼í•´ì„œ ì‹¤í–‰í•  ì¿¼ë¦¬ë¬¸ì„ ëª¨ì•„ ë‘” íŒŒì¼
	ì¿¼ë¦¬ë¬¸ì—ê²Œ id ê°’ì„ ë¶€ì—¬ -> daoê°€ ì°¸ì¡°í•  ì´ë¦„
-->
<mapper namespace="messageMapper">
	<insert id="insert" parameterType="kh.message.dto.MessageDTO">
		insert into msg values(seq_msg.nextval, #{nickname}, #{message})
	</insert>
</mapper>
```

- í•´ë‹¹ ê²½ë¡œì˜ í´ë”ë¡œ ìƒì„±í•´ì¤˜ì•¼ í•œë‹¤

![1.png](/assets/images/posts/2022-06-28/1.png)

### ğŸ”” ì¿¼ë¦¬ë¬¸ì˜ íƒœê·¸ìì˜ ì†ì„±

- id : daoì—ì„œ ì¿¼ë¦¬ë¬¸ì„ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì´ë¦„
- parameterType : DAOì—ì„œ ë³´ë‚¸ ì¸ìê°’ì˜ ìë£Œí˜•ì„ ëª…ì‹œ

    1. ë§Œì•½ ì¸ìê°’ì´ ê°ì²´ì˜ í˜•íƒœë¼ë©´ parameterTypeì— ë°˜ë“œì‹œ ìë£Œí˜•ì„ ëª…ì‹œ(íŒ¨í‚¤ì§€ëª…ê¹Œì§€ ì…ë ¥)
    2. ë§Œì•½ ì¸ìê°’ì´ ê¸°ë³¸í˜•ì´ë©´ parameterTypeì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

- resultType : DAOë¡œ return ì‹œì¼œì¤„ ë°ì´í„°ì˜ íƒ€ì…

### ğŸ§¨  ì£¼ì˜

- ëª¨ë“  ì¿¼ë¦¬ë¬¸ì€ <mapper> ì•ˆì—ì„œ ì‚¬ìš©í•œë‹¤.
- <mapper>ì—ëŠ” namespaceë¥¼ ì¿¼ë¦¬ë¬¸ì—ëŠ” idë¥¼ ë¶€ì—¬í•œë‹¤ â†’ DAOì—ì„œ ì‚¬ìš©
- â— myBatisì—ì„œ ì„¸ë¯¸í´ë¡ ì€ ë„£ì§€ ì•ŠëŠ”ë‹¤

### ğŸ”” ë„˜ê²¨ë°›ì€ ë°ì´í„°ë¥¼ ì¿¼ë¦¬ë¬¸ì—ì„œ ì…‹íŒ…í•˜ëŠ” ë°©ë²•

1. #{ë³€ìˆ˜ëª…} : ì¸ìê°’ì´ String ê°’ìœ¼ë¡œ ë“¤ì–´ì˜´


	1)Stringìœ¼ë¡œ ê°’ì´ ì˜¤ê¸°ì— ìë™ì ìœ¼ë¡œ â€˜ â€˜ ì‹ìœ¼ë¡œ ê°ì‹¸ì§„ë‹¤


	2)PreparedStatementëŠ” ì¸ìê°’ì„ ë¬¸ìì—´ë¡œ ì…‹íŒ… (sql injection ì˜ˆë°©)


	3)ì¼ë°˜ì ì¸ ê²½ìš° ì‚¬ìš©


	4)#{ë³€ìˆ˜ëª…} -> ë³€ìˆ˜ëª…ì˜ getterë¥¼ dtoì—ì„œ ì•Œì•„ì„œ ì°¾ì•„ì¤€ë‹¤



2. ${ë³€ìˆ˜ëª…} : ì¸ìê°’ì„ ì…‹íŒ…í•˜ë ¤ëŠ” ì»¬ëŸ¼ì˜ ìë£Œí˜•ì— ë§ì¶°ì„œ ìë™ìœ¼ë¡œ ì¸ìê°’ì˜ ìë£Œí˜•ì´ ë³€í™˜


	1)Statement ê°ì²´ì™€ ìœ ì‚¬ (sql injection ì˜ˆë°©)


	2)í…Œì´ë¸”ëª…ì´ë‚˜ ì»¬ëŸ¼ëª…ì„ ë™ì ìœ¼ë¡œ ì…‹íŒ… í•´ì£¼ëŠ” ê²½ìš° ì‚¬ìš© -> ê²€ìƒ‰ ê¸°ëŠ¥ ë•Œ í™œìš©



- ì¼ë°˜ì ì¸ ê²½ìš° ëŒ€ë¶€ë¶„ì€ #{} ì„ ì‚¬ìš©í•œë‹¤.

---

## 3)SELECT, INSERT , UPDATE, DELETE

### 1) ğŸ”” select

- selectOne : í•˜ë‚˜ì˜ ê°’ì„ ê°€ì ¸ì˜¤ë ¤ë©´
- selectList :  ë‹¤ì¤‘ê°’ ê°€ì ¸ì˜¤ê¸°

ğŸ” í•˜ë‚˜ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>


```java
<!-- í•˜ë‚˜ì˜ ë©”ì„¸ì§€ ì¡°íšŒ -->
<select id="selectOne" parameterType="int" resultType="kh.message.dto.MessageDTO">
	select * from msg where no = #{no}
</select>
```

- message-mapper.xmlì—ì„œ ì‹¤í–‰í•œ ê²°ê³¼ì˜ ë°˜í™˜íƒ€ì…ì„ resultTypeì— ì„¤ì •í•´ì¤€ë‹¤. ì´ë•Œ ë°˜í™˜íƒ€ì…ì´ DTO ì´ë©´ íŒ¨í‚¤ì§€ëª…ê¹Œì§€ ì¨ì¤€ë‹¤.
- resultTypeì— DTO íƒ€ì…ì„ ëª…ì‹œí•˜ê²Œ ë˜ë©´ DTO í´ë˜ìŠ¤ê°€ ê°€ì§€ê³  ìˆëŠ” setter / ì¸ìê°’ ë°›ëŠ” ìƒì„±ìë¥¼ í™œìš©í•˜ì—¬ ì»¬ëŸ¼ëª…ê³¼ ë™ì¼í•œ ë§´ë²„í•„ë“œì— ê°’ì„ ì…‹íŒ…í•˜ê²Œ ëœë‹¤. (ìë™ìœ¼ë¡œ ì»¬ëŸ¼ëª…ì— ë§ëŠ” ê°’ë“¤ì„ dtoì—ì„œ ì°¾ì•„ì„œ ê°’ì„ ë„£ì–´ì¤€ë‹¤)

<span style="color: #2D3748; background-color:#fff5b1;">HomeController</span>


```java
@RequestMapping(value ="/toOutputDTO") // í•œ í–‰ì˜ DTO ê°€ì ¸ì˜¤ê¸°
	public String toOutputDTO(Model model) throws Exception {
		MessageDTO dto = service.selectOne(8);
		model.addAttribute("dto",dto);
		return "outputDTO";
}
```
<span style="color: #2D3748; background-color:#fff5b1;">MessageService</span>

```java
// noì„ ë„˜ê²¨ë°›ì•„ í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ
public MessageDTO selectOne(int no) throws Exception {
	return dao.selectOne(no);
}
```
<span style="color: #2D3748; background-color:#fff5b1;">MessageDAO</span>


```java
// í•˜ë‚˜ì˜ ë©”ì„¸ì§€ ì¡°íšŒ
public MessageDTO selectOne(int no) throws Exception {
	return session.selectOne("messageMapper.selectOne",no);
}
```

- <mapper>ì˜ namespace . ì¿¼ë¦¬ë¬¸ì˜ idë¥¼ selectOne ë©”ì„œë“œì— ì¸ìë¡œ ë„£ëŠ”ë‹¤
- message-mapperì— ë³´ë‚´ì¤„ ê°’ë„ í•¨ê»˜ ì¸ìë¡œ ë„£ì–´ì¤€ë‹¤

ğŸ” ì—¬ëŸ¬ ë°ì´í„° ì¡°íšŒ

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>


```java
<!-- ì „ì²´ ë©”ì„¸ì§€ ì¡°íšŒ -->
<!-- ì „ì²´ ì¡°íšŒì´ê¸° ë•Œë¬¸ì— ë„˜ê²¨ì£¼ëŠ” parameter ê°’ì´ ì—†ë‹¤ -->
<select id="selectList" resultType="kh.message.dto.MessageDTO">
	select * from msg
</select>
```

- ì—¬ëŸ¬ ê°œë¥¼ ì¡°íšŒí•˜ì§€ë§Œ myBatisê°€ ì•Œì•„ì„œ listì— ê°’ì„ í•˜ë‚˜ì”© ë‹´ì•„ì¤€ë‹¤ â†’ ì¦‰ whileë¬¸ í•„ìš”ê°€ ì—†ë‹¤
- ë‹¤ì¤‘í–‰ì˜ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ê²½ìš° resultTypeì€ í•œí–‰ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì¤„ ìˆ˜ ìˆëŠ” ìë£Œí˜•ìœ¼ë¡œ
êµ¬ì„±í•´ë‘ê³  daoì—ì„œ selectList ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì•Œì•„ì„œ resultType Listë¡œ ì¡°íšŒëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•´ì¤€ë‹¤

<span style="color: #2D3748; background-color:#fff5b1;">HomeController</span>


```java
// ëª¨ë“  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
@RequestMapping(value ="/toOutputList")
	public String toOutputList(Model model) throws Exception {
		List<MessageDTO> list = service.selectList();
		model.addAttribute("list",list);
		return "outputList";
}
```
<span style="color: #2D3748; background-color:#fff5b1;">MessageService</span>


```java
// ëª¨ë“  ë©”ì„¸ì§€ ì¡°íšŒ
public List<MessageDTO> selectList() throws Exception {
		return dao.selectList();
}
```

<span style="color: #2D3748; background-color:#fff5b1;">MessageDAO</span>


```java
// ëª¨ë“  ë©”ì„¸ì§€ ì¡°íšŒ
public List<MessageDTO> selectList() throws Exception{
	return session.selectList("messageMapper.selectList");
}
```

### 2) ğŸ”” insert

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>


```java
<!-- ë©”ì„¸ì§€ ì €ì¥ -->
<insert id="insert" parameterType="kh.message.dto.MessageDTO">
	insert into msg values(seq_msg.nextval, #{nickname}, #{message})
</insert>
```

### 3) ğŸ”” update

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>

```java
<!-- ë©”ì„¸ì§€ ìˆ˜ì • -->
<update id="update" parameterType="kh.message.dto.MessageDTO">
	update msg set nickname = #{nickname}, message = #{message} where no = #{no}
</update>
```

### 4) ğŸ”” delete

<span style="color: #2D3748; background-color:#fff5b1;">message-mapper.xml</span>

```java
<!-- ë©”ì„¸ì§€ ì‚­ì œ -->
<delete id="delete" parameterType="int">
	delete from msg where no = #{no}
</delete>
```





# 2ï¸âƒ£ Scheduler

### ğŸ”” í™˜ê²½ ì„¤ì •

servlet-context â†’ Namespaces â†’ task ì²´í¬

servlet-context â†’ task:annotation-driven/ ë„£ì–´ì£¼ê¸°

### ğŸ”” cron í‘œí˜„ì‹

ìŠ¤ì¼€ì¥´ëŸ¬ì—ê²Œ ì–´ëŠ ì£¼ê¸°ë§ˆë‹¤ ìŠ¤ì¼€ì¥´ëŸ¬ ë™ì‘ì‹œí‚¬ê±´ì§€ì— ëŒ€í•œ ì‹œê°„ í‘œí˜„ì‹

```java
// í•´ë‹¹ ë©”ì„œë“œë¥¼ ì¸ìë¡œ ë„˜ê²¨ì¤€ í‘œí˜„ì‹ì— ë”°ë¥¸ ì£¼ê¸°ë§ˆë‹¤ ì‹¤í–‰ì‹œí‚¤ê² ë‹¤ëŠ” ì–´ë…¸í…Œì´ì…˜
// * * * * * * * = ì´ˆ ë¶„ ì‹œ ì¼ ì›” ìš”ì¼
@Scheduled(cron="* * * * * *")
public void test() {
	System.out.println("ìŠ¤ì¼€ì¥´ëŸ¬ ë™ì‘");
}
```

```java
ì´ˆ : 0~59
ë¶„ : 0~59
ì‹œ : 0~23
ì¼ : 1~31
ì›” : 1~12
ìš”ì¼ : 0(ì¼ìš”ì¼)~6(í† ìš”ì¼) / MON, WED, FRI
* : ëª¨ë“  ì‹œê°„ì„ ëŒ€ì²´
0/3 : 3ì´ˆë§ˆë‹¤ ì‹¤í–‰ ì—¬ê¸°ì„œ 0ì´ë¼ëŠ”ê±´ ~ë§ˆë‹¤ ex) ëª‡ ì´ˆë§ˆë‹¤ ëª‡ ë¶„ë§ˆë‹¤ ëª‡ ì‹œê°„ë§ˆë‹¤
```

ex)
```java
@Scheduled(cron="30 * * * * *")
	public void test() {
		System.out.println("ë§¤ë¶„ ìŠ¤ì¼€ì¥´ëŸ¬ ë™ì‘");
}
```

- ë§¤ë¶„ 30ì´ˆ ë§ˆë‹¤ ì‹¤í–‰(15ë¶„ 30ì´ˆ, 16ë¶„ 30ì´ˆ)

---

### ğŸ”” ì½”ë“œ

Scheduler.java

```java
package kh.board.utils;
@Component
public class Scheduler {

	@Autowired
	private FileService service;

	@Autowired
	private ServletContext sCtx;

	public Scheduler() {
		System.out.println("ìŠ¤ì¼€ì¥´ëŸ¬ ìƒì„±");
	}

	@Scheduled(cron="0/2 * * * * *")
	public void deleteFiles() throws Exception {
		// ê²½ë¡œ ì–»ì–´ë‚´ê¸° ìœ„í•´ Schedulerì—ì„œëŠ” Session ì‚¬ìš© x, sCtx ì‚¬ìš©
		String path = sCtx.getRealPath("board");
		service.deleteFiles(path);
	}
}
```

- 2ì´ˆ ë§ˆë‹¤ ì‹¤í–‰ (ì‹¤ì œë¡œëŠ” ê¸°ê°„ì„ ì˜ ì„¤ì •í•´ì„œ í•´ì•¼í•œë‹¤)

<span style="color: #2D3748; background-color:#fff5b1;">FileService.java</span>


```java
package kh.board.file;

import java.io.File;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
public class FileService {

@Autowired
private FileDAO dao;

	/*
	 * files í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„°ëŠ” ì‹¤ì œ ê²Œì‹œê¸€ì´ ì‚´ì•„ìˆê³ , ì²¨ë¶€ê°€ ë˜ì–´ ìˆëŠ” íŒŒì¼ë“¤
	 * files í…Œì´ë¸”ì—ëŠ” ë°ì´í„°ê°€ ì—†ì§€ë§Œ ì„œë²„ì˜ ê²½ë¡œì—ëŠ” ì—¬ì „íˆ ì‚´ì•„ìˆëŠ” íŒŒì¼ë“¤
	 * (ê²Œì‹œê¸€ì´ ì‚­ì œëì§€ë§Œ ì—¬ì „íˆ ì‚­ì œë˜ì§€ ì•Šì€ ì‹¤ì œ íŒŒì¼ë“¤)
	 *
	 * files í…Œì´ë¸”ì— ìˆëŠ” sys_name ëª¨ë‘ í•„ìš”í•¨
	 * ì„œë²„ ê²½ë¡œì— ìˆëŠ” íŒŒì¼(sys_name)ì˜ ë¦¬ìŠ¤íŠ¸
	 * */

	public void deleteFiles(String path) throws Exception {
		// dbì— ì €ì¥ë˜ì–´ ìˆëŠ”ê±¸ ê°€ì ¸ì˜¤ê¸°
		// daoë¥¼ í†µí•´ files í…Œì´ë¸”ì— sys_name ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
		List<String> files_db = dao.selectSys_name();

		// íŒŒì¼ ê°ì²´ë¡œ ì„œë²„ ê²½ë¡œ(board)ì•ˆì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  íŒŒì¼ì„ ê°€ì ¸ì˜¬ ê²ƒ
		// -> íŒŒì¼ ê°ì²´ë¥¼ í†µí•´ íŒŒì¼ì˜ ì´ë¦„ê°’ì„ ì–»ì–´ë‚¼ ìˆ˜ ìˆìŒ
		// -> íŒŒì¼ ê°ì²´ë¥¼ í†µí•´ íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ê²ƒë„ ê°€ëŠ¥
		// ì„œë²„ì— ì €ì¥ë˜ì–´ ìˆëŠ”ê±¸ ê°€ì ¸ì˜¤ê¸°
		File[] files_root = new File(path).listFiles();

		// DBì™€ ì„œë²„ ê²½ë¡œì— íŒŒì¼ì˜ ëª©ë¡ì´ ìˆë‹¤ë¼ê³  í•œë‹¤ë©´ ê·¸ ë•Œë§Œ ì‘ì—…
		if(files_db.size() != 0 && files_root.length != 0) {
			for(File f : files_root) { // ì„œë²„ì— ì €ì¥ëœ íŒŒì¼ë“¤ì„ ëª¨ë‘ forë¬¸ ëŒë¦¬ë©° dbì™€ ë¹„êµ í™•ì¸
				// files_rootì— ìˆëŠ” ë°ì´í„°ë“¤ì´ files_dbì—ë„ ìˆë‹¤ë©´ true ì—†ë‹¤ë©´ false ë°˜í™˜
				if(!files_db.contains(f.getName())) {  // ì—¬ê¸°ì„œëŠ” files_rootì—ëŠ” ìˆëŠ”ë° dbì—ëŠ” ì—†ë‹¤ë©´
					System.out.println(f.getName() + " : ì‚­ì œí•  íŒŒì¼");
					f.delete(); // íŒŒì¼ ì‚­ì œ
				}
			}
		}
	}
}
```

1. ì„œë²„ì— ë‚¨ì•„ ìˆëŠ” íŒŒì¼ ëª©ë¡ì„ ë°›ì•„ì˜¨ë‹¤  File[] files_root = new File(path).listFiles();
2. dbì— ë‚¨ì•„ìˆëŠ” íŒŒì¼ ëª©ë¡ì„ ë°›ì•„ì˜¨ë‹¤ List<String> files_db = dao.selectSys_name();
3. ì„œë²„ì—ëŠ” ìˆëŠ”ë° dbì—ëŠ” ì—†ëŠ” íŒŒì¼ë“¤ì„ ì°¾ì•„ë‚´ì„œ ê·¸ ë¶€ë¶„ë“¤ë§Œ ì‚­ì œ ì‹œì¼œì¤€ë‹¤. ì´ë•Œ **contains** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ê²°ê³¼ê°’ì€ true / falseë¡œ ë°˜í™˜ëœë‹¤

<span style="color: #2D3748; background-color:#fff5b1;">FileDAO.java</span>

```java
// sys_nameë§Œ ê°€ì ¸ì˜¤ê¸° (ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš©ì‹œ í•„ìš”)
public List<String> selectSys_name() throws Exception {
	String sql = "select sys_name from files";

	try(Connection con = bds.getConnection();
		PreparedStatement pstmt = con.prepareStatement(sql)) {

		ResultSet rs = pstmt.executeQuery();
		List<String> list = new ArrayList<>();

		while(rs.next()) {
			list.add(rs.getString(1));
		}
		return list;
	}
}
```

