---
layout: single
title:  "Spring ìˆ˜ì—… ì‹œì‘(ê¸°ì´ˆ)"
categories: Spring
tag: [Spring ê¸°ì´ˆ ì‹œì‘]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---

# ğŸ’»2022-06-14

## Spring

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ


## 1ï¸âƒ£ ì„¤ì •

1. ì¸ì½”ë”© utf-8
2. Eclipse Marketplace
3. src/main/resourcesì— applicationContext.xml íŒŒì¼ ìƒì„± (new â†’ spring bean configuration file)


## 2ï¸âƒ£ ìŠ¤í”„ë§ ì‹œì‘

BeanFactory í´ë˜ìŠ¤ì²˜ëŸ¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°ì–´ë‚´ëŠ” ì‘ì—…ì„ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ applicationContext.xml ì—ì„œ í•¨

### ğŸ”” ìš©ì–´ ë° ì‘ë™ì›ë¦¬
ì§ì ‘ ë“±ë¡(ì¸ìŠ¤í„´ìŠ¤, í´ë˜ìŠ¤, ê°ì²´)



id : ìƒì„±í•˜ê³ ì í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ë¦„


class : ìƒì„±í•˜ê³ ì í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ì˜ ê²½ë¡œê°’


ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ : í”„ë ˆì„ì›Œí¬ì—ì„œ ê´€ë¦¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤, ë¦¬ì†ŒìŠ¤ë“±ì„ ë‹´ê³  ìˆëŠ” ë°”êµ¬ë‹ˆ


GenericXmlApplicationContext : XML íŒŒì¼ë¡œë¶€í„° ì •ë³´ë¥¼ ì½ì–´ì™€ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸°í™”


Dependency Injection(DI) : ì˜ì¡´ì„± ì£¼ì…, constructor injection(ìƒì„±ì ì£¼ì…) / setter injection(ì„¸í„° ì£¼ì…) ì¡´ì¬



applicationContext.xml

```java
<bean id="samsung" class="com.kh.intro.SamsungLaptop"/>
```

Laptop.java

```java
package com.kh.intro;
public class Laptop {
	public Laptop() {} // ê¸°ë³¸ ìƒì„±ìëŠ” ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼ í•œë‹¤
	public void powerOn() {
		System.out.println("ì „ì› On");
	}

	public void powerOff() {
		System.out.println("ì „ì› Off");
	}

	public void volumeUp() {
		System.out.println("ë³¼ë¥¨ Up");
	}

	public void volumeDown() {
		System.out.println("ë³¼ë¥¨ Down");
	}
}
```

Run

```java
// ë¹ˆ(ì¸ìŠ¤í„´ìŠ¤) ì‚¬ìš©ë²•
// DL (Dependency Lookup) : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì•Œì•„ì„œ ìƒì„± í•´ì¤€ ì¸ìŠ¤í„´ìŠ¤ë“¤ì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í•˜ëŠ” ê²ƒ
// í˜•ë³€í™˜ í•„ìš” -> applicationContext.xmlì—ì„œ ë§Œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ëŠ” SamsungLaptopí´ë˜ìŠ¤ì˜ ì¸ì„œí„´ìŠ¤
// SamsungLaptopì€ Laptopì„ ìƒì†
// springì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì€ singletonì´ defaultë‹¤ -> ì£¼ì†Œê°’ì´ ê°™ë‹¤
Laptop laptop = (Laptop) factory.getBean("samsung"); // getBeanì˜ ì¸ìëŠ” beanì˜ id
Laptop laptop2 = (Laptop) factory.getBean("samsung");
System.out.println(laptop); //com.kh.intro.SamsungLaptop@1f97cf0d
System.out.println(laptop2); // com.kh.intro.SamsungLaptop@1f97cf0d

laptop.powerOn(); // ì „ì› On
laptop.powerOff(); // ì „ì› Off
laptop.volumeUp(); // ë³¼ë¥¨ Up
laptop.volumeDown(); // ë³¼ë¥¨ Down
```

### ğŸ”” Dependency Injection(DI) : ì˜ì¡´ì„± ì£¼ì…

applicationContext.xml

1. ë°©ë²•1 - ìƒì„±ì ì£¼ì…

```java
<!-- ìƒì„±ì ì£¼ì… -->
<bean id="samsung" class="com.kh.intro.SamsungLaptop">
	<constructor-arg index="0" value="1000">
	</constructor-arg>
</bean>
```

- <constructor-arg> íƒœê·¸ ì‚¬ìš©
- index : ì¸ìì˜ ìˆœì„œ
- value : ì¸ìë¡œ ë“¤ì–´ê°ˆ ê°’
- ì£¼ì… ëŒ€ìƒì´ ìƒì„±ì

2. ë°©ë²•2 - setter ì£¼ì…

```java
<!-- setter ì£¼ì… -->
<bean id="samsung" class="com.kh.intro.SamsungLaptop">
	<property name="price" value="2000">
	</property>
</bean>
```

- **setterë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…**
- <property> íƒœê·¸ë¥¼ ì‚¬ìš©
- name :  ë³€ìˆ˜ì´ë¦„
- value : ë³€ìˆ˜ë¡œ ë“¤ì–´ê°ˆ ê°’
- setter/getter ë©”ì†Œë“œ í•„ìš”
- ì£¼ì… ëŒ€ìƒì´ ë©”ì„œë“œ

## 3ï¸âƒ£ í”„ë¡œì íŠ¸ ìƒì„±ì‹œ

1. í”„ë¡œì íŠ¸ ìš° í´ë¦­ í›„ â†’ properties â†’ facet ìë°” / dynamic web module ë²„ì „ ë³€ê²½
2. pom.xml ìë°” / ìŠ¤í”„ë§ ë²„ì „ í™•ì¸ â†’ 11 / 5.3.20

![1.png](/assets/images/posts/2022-06-14/1.png)


3. pom.xml logging ë¶€ë¶„ ë°”ê¿”ì£¼ê¸°

```java
<!-- Logging -->
<dependency>
	<groupId>org.apache.logging.log4j</groupId>
	<artifactId>log4j-api</artifactId>
	<version>2.17.2</version>
</dependency>
<dependency>
	<groupId>org.apache.logging.log4j</groupId>
	<artifactId>log4j-to-slf4j</artifactId>
	<version>2.17.2</version>
</dependency>
```

4. HomeController ë°”ê¾¸ê¸°

![2.png](/assets/images/posts/2022-06-14/2.png)

### ğŸ”” Mapping

component-scan : base-package ì†ì„± ì•ˆì— ë“¤ì–´ê°€ìˆëŠ” ê²½ë¡œë¥¼ ê²€ì‚¬í•˜ë©´ì„œ @annotationì´ ë¶™ì€ í´ë˜ìŠ¤ë“¤ì˜ instanceë¥¼ ìƒì„±í•˜ëŠ” ì—­í• 

servlet-context

```java
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
	<beans:property name="prefix" value="/WEB-INF/views/" />
	<beans:property name="suffix" value=".jsp" />
</beans:bean>
```

HomeController

```java
@Controller
public class HomeController {

	public HomeController() {
		System.out.println("í™ˆ ì»¨íŠ¸ë¡¤ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±");
	}

	@RequestMapping(value = "/")
	public String home() {
		return "home";
	}

	@RequestMapping(value = "/test")
	public String test() {
		return "test";
	}
}
```

- servlet-contextì˜ viewResolverë¥¼ í†µí•´ì„œ HomeControllerì—ì„œ returnë˜ëŠ” ê°’ë“¤ì„ home.jsp  / test.jsp ì´ëŸ°ì‹ìœ¼ë¡œ ì•ˆí•´ë„ ë˜ëŠ”ê²ƒ â†’ jspì˜ ì´ë¦„ë§Œ ë¶™ì—¬ì£¼ë©´ ëœë‹¤

ğŸ’¡ ë§Œì•½ ì•„ë˜ì™€ ê°™ì´ viewsì•ˆì— ë°”ë¡œ jsp ê°€ ìˆëŠ”ê²ƒì´ ì•„ë‹Œ temp ë¼ëŠ” í´ë”ê°€ ì¡´ì¬í•˜ê³  ê·¸ ì•ˆì— jsp ê°€ ì¡´ì¬í•œë‹¤ë©´

![3.png](/assets/images/posts/2022-06-14/3.png)

```java
@RequestMapping(value = "/test2")
	public String test2() {
		return "temp/test2"; // ì•ì— í´ë”ì´ë¦„ì„ ë¶™ì—¬ì¤€ë‹¤
}
```

ì£¼ì†Œì°½ì—ëŠ” @RequestMappingì˜ ì£¼ì†Œì¸ localhost/test2 ë¡œ ì…ë ¥í•´ì•¼ í˜ì´ì§€ ì´ë™