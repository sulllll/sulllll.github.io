---
layout: single
title:  " DAY-49 Jsp ì‹œì‘"
categories: JSP
tag: [JSP, getRequestDispatcher, setAttribute]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---



# ğŸ˜º 2022-05-11 / JSP

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ



# 2022-05-11

## 1ï¸âƒ£ serverí´ë”ì˜ context.xmlì„ ë³€ê²½

- Connection poolì˜ ì˜¤ë¥˜ë¡œ ì¸í•´ context.xmlì—ì„œ ì„¤ì •ì„ í•´ì¤€ë‹¤ (ì½”ë“œ ì¶”ê°€)

```jsx
<Resource name='jdbc/bds'
  auth='Container'
  driverClassName='oracle.jdbc.driver.OracleDriver'
  type='javax.sql.DataSource'
  factory='org.apache.tomcat.dbcp.dbcp2.BasicDataSourceFactory'
  url='jdbc:oracle:thin:@localhost:1521:xe'
  username='kh'
  password='kh'
  maxActive='30'
  maxWait='-1'/>
```

## 2ï¸âƒ£ MVC íŒ¨í„´

### 1) MVC1

- ë””ìì¸ íŒ¨í„´(ì½”ë“œë¥¼ ì§œëŠ” ë°©ë²•)
- Model(DBì™€ ì—°ë™í•´ CRUD ì‘ì—…ì„ í•˜ëŠ” ê°ì²´) â†’ DAO
- View + Controller (í˜„ì¬) â†’ main : sysout(ì¶œë ¥) / dao ë©”ì„œë“œ í˜¸ì¶œ(controller)
- Servlet : Contoller / out.write() â†’ ì¶œë ¥

### 2) MVC2

- Model : ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ DBì™€ ì—°ë™í•´ CRUD ì‘ì—…í•˜ëŠ” DAO
- Controller : ê¸°ëŠ¥ ë‹´ë‹¹ + í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ / ì‘ë‹µ ì²˜ë¦¬ â†’ Servlet
- View : clinetì—ê²Œ ì‘ë‹µí•´ì¤„ í˜ì´ì§€ë¥¼ ê¾¸ë©°ì£¼ëŠ” ì—­í•  â†’ JSP

## 3ï¸âƒ£ ìš©ì–´

controller ì—ì„œëŠ” ë°ì´í„°ë¥¼ daoë¥¼ í†µí•´ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…

### 1) sendRedirect (ì„œë¸”ë¦¿)

```java
response.sendRedirect(url)
```

í´ë¼ì´ì–¸íŠ¸ì—ê²Œ urlì„ ìš”ì²­í•´ë¼ë¼ëŠ” ì‘ë‹µê°’ì„ ì¤€ë‹¤

- í•´ë‹¹ urlë¡œ í˜ì´ì§€ê°€ ë„˜ì–´ê°€ê²Œ í•´ì¤€ë‹¤

### 2) getRequestDispatcher

```java
// ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ jsp ì „ë‹¬
	String temp = "hello";

request.setAttribute("temp", temp);

// request.getRequestDispatcher(requestë¥¼ ì „ë‹¬í•  ê²½ë¡œê°’);
request.getRequestDispatcher("/output.jsp");
```

- í•´ë‹¹ urlë¡œ í˜ì´ì§€ê°€ ë„˜ì–´ê°€ê²Œ í•´ì¤€ë‹¤

### 3) setAttribute

```java
request.setAttribute("key","value");
```

- key : ë‚´ê°€ ì¶”ê°€í•´ì¤€ ê°’ì„ êº¼ë‚´ê³  ì‹¶ì„ë•Œ ì‚¬ìš©í•˜ëŠ” ì‹ë³„ì
- value : ë‚´ê°€ ì‹¤ì œë¡œ ì¶”ê°€í•´ì¤€ ê°’ ê·¸ ìì²´

request.setParameter() ì™€ request.getParameter()ì€ Stringì˜ ê°’ë§Œ ì „ë‹¬ ê°€ëŠ¥

â†’ actionìœ¼ë¡œ ë„˜ì–´ì˜¨ ê°’ì„ ë³€ê²½ì‹œí‚¨í›„ JSP í˜ì´ì§€ë¡œ ë„˜ê²¨ì£¼ê¸° ìœ„í•´ì„œëŠ” request.setAttribute() ë¥¼ ì¨ì„œ ë„˜ê²¨ì£¼ê³  JSP í˜ì´ì§€ì—ì„œëŠ” request.getAttribute()ë¥¼ ì´ìš©í•´ ê°’ì„ ë°›ëŠ”ë‹¤

### 4) forward

ì„œë²„ê°€ ë§Œë“¤ì–´ì¤€ request, responseë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ëŠ” ì‘ì—…ì„ í•´ì¤Œ

## 4ï¸âƒ£ EL(Expression Language)

servlet(Controller)ë¡œ ë¶€í„° ë„˜ê²¨ë°›ì€ requestì•ˆì— ìˆëŠ” ê°’ì„ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´

```java
${key} : controllerì—ì„œ setting í•´ì¤¬ë˜ keyê°’ì„ ${}ì•ˆì— ë„˜ê¸°ë©´
-> ê·¸ keyê°’ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ ë°˜í™˜
```

## 5ï¸âƒ£ jsp ì‹¤í–‰

OutputController(servlet)

```java
request.setAttribute("temp", temp);
request.setAttribute("number", 50);

// ê°ì²´ ë‹¨ìœ„ì˜ ë°ì´í„° ì „ë‹¬
MessageDTO dto = new MessageDTO(0, "tom", "hi,hello good");
request.setAttribute("dto", dto); // keyì™€ valueë¡œ ê°’ì„ ë‹´ëŠ”ë‹¤

// request.getRequestDispatcher(requestë¥¼ ì „ë‹¬í•  ê²½ë¡œê°’);
request.getRequestDispatcher("/output.jsp").forward(request, response);
// output.jspì— request,responseì˜ ê°’ì„ ì¤€ë‹¤
```

output(jsp)

```html
<body>
	${dto}
</body>
```

MessageDTOì˜ toStringì´ ì¶œë ¥ëœë‹¤.

![1.png](/assets/images/posts/2022-05-11/1.png)

## 6ï¸âƒ£ jstl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©

jstl core ê²€ìƒ‰ â†’ <%@ taglib prefix="c" uri="[http://java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core)" %> ë³µì‚¬ â†’ jsp íŒŒì¼ì— import

1) items : forë¬¸ì„ ëŒë¦´ ë¦¬ìŠ¤íŠ¸ / ë°°ì—´

2) var : ë¦¬ìŠ¤íŠ¸ / ë°°ì—´ ê° ì¸ë±ìŠ¤ì— ë‹´ê²¨ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹´ì„ ë³€ìˆ˜ëª…

jstl ë°˜ë³µë¬¸

```html
<c:forEach items="${list}" var="dto">
	<div>${dto.getSeq()} : ${dto.getNickname()} : ${dto.getMessage()}</div>
</c:forEach>
```

í…Œì´ë¸” ì´ìš© ë°˜ë³µë¬¸

```html
<table border="1px solid black">
 <tr>
    <th>ë²ˆí˜¸</th>
    <th>ì´ë¦„</th>
    <th>ë©”ì„¸ì§€</th>
  </tr>
 	<c:forEach items="${list}" var="dto">
 	<tr>
		<td>${dto.getSeq()} </td>
		<td>${dto.getNickname()} </td>
		<td>${dto.getMessage()}</td>
	</tr>
	</c:forEach>
</table>
```