---
layout: single
title:  " DAY-52 JSP - ë¡œê·¸ì¸/íšŒì›ê°€ì…/ì„¸ì…˜"
categories: JSP
tag: [JSP, ë¡œê·¸ì¸,íšŒì›ê°€ì…,ì„¸ì…˜]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---



# ğŸ˜º 2022-05-16 / JSP

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ


# 2022-05-16

# 1ï¸âƒ£ ë¡œê·¸ì¸ & íšŒì›ê°€ì…

## 1) íšŒì›ê°€ì… ì½”ë“œ

```java
// íšŒì›ê°€ì… í•˜ê¸°
public boolean checkId(String id) throws Exception {
	String sql = "select count(*) from tbl_member where id = ?";

	try(Connection con = this.getConnection();
		PreparedStatement pstmt = con.prepareStatement(sql)) {

		pstmt.setString(1, id);
		ResultSet rs = pstmt.executeQuery();

		int result = 0;
		if(rs.next()) {
			result = rs.getInt(1); // countë˜ë²„ë¦° ê²°ê³¼ê°’
		}
		if(result == 0) {
			return true;
		}else {
			return false;
		}
	}
}
```

- íšŒì›ê°€ì…ì˜ ê²½ìš° ë°ì´í„°ê°€ ì¡´ì¬í•˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— sql êµ¬ë¬¸ì‹¤í–‰ ê²°ê³¼ê°€ 0ì´ ë˜ì–´ì•¼ í•œë‹¤
- ë”°ë¼ì„œ result = 0ì—ì„œ sql ì‹¤í–‰ í›„ì—ë„ 0ì´ ëœë‹¤ë©´ ê°€ì…ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— trueê°€ ë°˜í™˜ë˜ê³  1ì´ ìˆë‹¤ë©´ ê¸°ì¡´ì— ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²ƒ ì´ê¸° ë•Œë¬¸ì— falseê°€ ëœë‹¤.

## 2) ë¡œê·¸ì¸ ì½”ë“œ

```java
public boolean signIn(String inputId, String inputPassword) throws Exception {

	String sql = "select count(*) from tbl_member where id = ? and pw = ?";

	try(Connection con = this.getConnection();
		PreparedStatement pstmt = con.prepareStatement(sql)) {

		pstmt.setString(1, inputId);
		pstmt.setString(2, inputPassword);

		ResultSet rs = pstmt.executeQuery();

		int result = 0;
		if(rs.next()) {
			result = rs.getInt(1); // countë˜ë²„ë¦° ê²°ê³¼ê°’
		}
		if(result == 1) {
			return true;
		}else {
			return false;
		}
	}
}
```

- ë¡œê·¸ì¸ ê°™ì€ ê²½ìš° ê¸°ì¡´ì˜ ë°ì´í„°ê°€ ìˆê¸° ë•Œë¬¸ì— sql êµ¬ë¬¸ ì‹¤í–‰ ê²°ê³¼ê°€ countê°€ 1ì´ ë˜ì–´ì•¼ í•œë‹¤
- ë”°ë¼ì„œ ê¸°ì¡´ì˜ resultê°€ 0ì—ì„œ ë°ì´í„°ê°€ ì¡´ì¬í•œë‹¤ë©´ 1ë¡œ ë°”ë€Œì–´ returnìœ¼ë¡œ true ê°’ì´ ë°˜í™˜ëœë‹¤

# 2ï¸âƒ£ jsp íŒŒì¼ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì“°ê¸°

```java
<c:if test ="${rs eq true}">
	<script>
		alert("ë¡œê·¸ì¸ ì„±ê³µ");
	</script>
</c:if>
<c:if test ="${rs eq false}">
	<script>
		alert("ë¡œê·¸ì¸ ì‹¤íŒ¨");
	</script>
</c:if>
```

- jstl ì‚¬ìš©

# 3ï¸âƒ£ Session

í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ê°€ ì„œë²„ì— ì ‘ì†í•˜ëŠ” ìˆœê°„(ì²« ìš”ì²­ê°’ì„ ë³´ë‚´ëŠ” ìˆœê°„) â†’ ì„œë²„ê°€ ì§€ê¸ˆ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ ì‹ë³„ê°’ì„ í•˜ë‚˜ ìƒì„±í•¨(session id) â†’ ì„œë²„ëŠ”ì‹ë³„ ê°’ì„ ì´ìš©í•´ HttpSession ê°ì²´ (ì €ì¥ì†Œ)ë¥¼ ìƒì„±

1. sessionì„ ì–´ë–»ê²Œ í™œìš©í•  ê²ƒì¸ê°€

ì›¹ë¸Œë¼ìš°ì €ë¥¼ í‚¤ê³  ê·¸ ë¸Œë¼ìš°ì €ë¥¼ ì¢…ë£Œí• ë•Œê¹Œì§€ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ session ê°ì²´ê°€ ê³„ì† ìœ ì§€ë˜ê¸° ë•Œë¬¸ì— ì´ ì•ˆì— ì ‘ì†í•˜ê³  ìˆëŠ” ë™ì•ˆ ì €ì¥í•˜ê³  ì‹¶ì€ ê°’ë“¤ì„ ë„£ì–´ë‘ê³  ê³„ì† êº¼ë‚´ì“°ëŠ” ê²ƒì´ ê°€ëŠ¥

- sessionì€ forward í•´ì£¼ì§€ ì•Šì•„ë„ jspì—ì„œ ì ‘ê·¼ê°€ëŠ¥

## 1) session ì‚­ì œ, ì´ˆê¸°í™”

```java
// ì§€ê¸ˆ ìš”ì²­ì„ ë³´ë‚¸ í´ë¼ì´ì–¸íŠ¸ì˜ ì„¸ì…˜ ì–»ì–´ì˜¤ê¸°
HttpSession session = request.getSession();

// 1.session ê°ì²´ë¥¼ ì´ˆê¸°í™”
session.invalidate(); // session ì´ˆê¸°í™”(ë¡œê·¸ì¸ë˜ìˆëŠ” ìƒíƒœë¥¼ ë¡œê·¸ì•„ì›ƒìœ¼ë¡œ ë³€ê²½)
response.sendRedirect("/index.jsp"); // ë‹¤ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™

// 2.session ì €ì¥ì†Œì—ì„œ loginSession ê°’ë§Œ ì‚­ì œ
session.removeAttribute("loginSession");
response.sendRedirect("/index.jsp"); // ë‹¤ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
```

- ë¡œê·¸ì•„ì›ƒ ê°™ì€ ê²½ìš° invalidate()ë¥¼ ì“°ëŠ”ê²Œ ë‚«ë‹¤