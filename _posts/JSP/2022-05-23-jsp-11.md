---
layout: single
title:  " DAY-57 JSP - ê²Œì‹œíŒ ëŒ“ê¸€ ê´€ë¦¬"
categories: JSP
tag: [JSP, ê²Œì‹œíŒ ëŒ“ê¸€ ê´€ë¦¬]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
---



# ğŸ˜º 2022-05-23 / JSP

<!--Quote-->
> â— ìˆ˜ì—…ì„ ë“£ê³ , ê°œì¸ì´ ê³µë¶€í•œ ë‚´ìš©ì„ ì ì€ ê²ƒ ì´ê¸°ì— ì˜¤ë¥˜ê°€ ë§ì„ ìˆ˜ë„ ìˆìŒ




## 1ï¸âƒ£ ì½”ë“œ ë¶„ì„

JSON.parse()

- **parse ë©”ì†Œë“œëŠ” string ê°ì²´ë¥¼ json ê°ì²´ë¡œ ë³€í™˜**

detailView.jsp

```java
success : function(rs) {
	console.log(rs);
	if(rs === "fail") {
	alert("ëŒ“ê¸€ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤");
	}else {
		let list = JSON.parse(rs); // ê°ì²´ ë°°ì—´ì´ ë‹´ê²¨ìˆìŒ
		console.log(list);
		}
}
```

**JSON.stringifyë€?**

- stringify ë©”ì†Œë“œëŠ” json ê°ì²´ë¥¼ StringÂ ê°ì²´ë¡œ ë³€í™˜

ì„¸ì…˜ ê°’ ì¡°íšŒí•˜ê¸°

session.getAttribute(String name)

- í˜„ì¬ ì„¸ì…˜ì— ì €ì¥ëœ ê°’ì„ ì¡°íšŒí•˜ëŠ”ê²ƒ return íƒ€ì…ì€ object í˜•

ReplyController

```java
if(uri.equals("/insert.rp")) {
	int seq_board = Integer.parseInt(request.getParameter("seq_board"));
	String content = request.getParameter("content");
	String writer_nickname = ((MemberDTO)session.getAttribute("loginSession")).getNickname(); // dto.getNickname()ì™€ ê°™ë‹¤ memberdto í´ë˜ìŠ¤
	String writer_id = ((MemberDTO)session.getAttribute("loginSession")).getId(); // dto.getId()ì™€ ê°™ë‹¤ memberdtoí´ë˜ìŠ¤

	System.out.println(seq_board + " : " + content + " : " + writer_nickname + " : " + writer_id);
	ReplyDAO dao = new ReplyDAO();

	try {
			int rs = dao.insert(new ReplyDTO(0,seq_board,content,writer_nickname,writer_id,null));
			if(rs > 0) { // ëŒ“ê¸€ ë“±ë¡ ì„±ê³µ
				ArrayList<ReplyDTO> list = dao.selectAll(seq_board);
				Gson gson = new Gson();
				String result = gson.toJson(list);
				response.getWriter().append(result); // ë‹¤ì‹œ detailView.jspë¡œ ë„˜ê²¨ì¤€ë‹¤ ì„±ê³µí•˜ë©´ successë¡œ ë„˜ì–´ê° ì‹¤íŒ¨í•˜ë©´ errorë¡œ ë„˜ì–´ê°


			}else {
				response.getWriter().append("fail"); // ëŒ“ê¸€ ë“±ë¡ ì‹¤íŒ¨
			}
		}catch (Exception e) {
			e.printStackTrace();
		}
	}
```

- writer_nickname ê³¼ writer_idëŠ” í˜„ì¬ ë¡œê·¸ì¸ë˜ì–´ ìˆëŠ” ì‚¬ëŒì˜ ê°’ì„ sessionì„ í†µí•´ ì–»ì–´ì˜¤ê³  ìˆë‹¤

## 2ï¸âƒ£ ëª¨ë¥´ëŠ” ë¶€ë¶„

### ì„ íƒí•œ ë²„íŠ¼ì´ ëª‡ë²ˆ ëŒ“ê¸€ì¸ì§€ ì–´ë–»ê²Œ ì•Œê¹Œ?

```java
if(reply.writer_id === "${loginSession.id}") {
	let modifyBtn = $("<button>").addClass("btn btn-warning modfy-reply").html("ìˆ˜ì •");
	let deleteBtn = $("<button>").addClass("btn btn-danger delete-reply" value="${reply.seq_reply}").html("ì‚­ì œ");
	let btn = $("<div>").addClass("col-3 body-btn-reply");
	btn.append(modifyBtn, deleteBtn);
	$(".body-reply").append(btn); // ì‘ì„±ìì™€ ê°™ë‹¤ë©´ ì‹¤ì œ ìš”ì†Œë¥¼ htmlì˜ì—­ì— ì¶”ê°€í•˜ê¸°
}
```

buttonì— value ê°’ì„ ë„£ì–´ì¤€ë‹¤

### ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ JSTL ì‚¬ìš©í•˜ê¸°

1. c:out ë“±ì„ ì´ìš©í•´ ê°’ ê°€ì ¸ì˜¤ê¸°

```java
let data = '<c:out value="${replyList}"/>';
console.log(data);
```

1. ê·¸ëƒ¥ ${}ë§Œ ì´ìš©í•˜ê¸°

```java
let data = "${replyList}";
console.log(data);
```